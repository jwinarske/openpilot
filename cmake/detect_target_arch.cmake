
if(NOT CMAKE_CROSSCOMPILING)
    set(TARGET_ARCH ${CMAKE_HOST_SYSTEM_PROCESSOR})
else()
    set(TARGET_ARCH_REGEX "^.*-march[= ]([^ ]+).*$")
    string(REGEX MATCH "${TARGET_ARCH_REGEX}" TARGET_ARCH_MATCH "${CMAKE_C_FLAGS}" "${CMAKE_CXX_FLAGS}")
    if (TARGET_ARCH_MATCH)
        string(REGEX REPLACE "${TARGET_ARCH_REGEX}" "\\1" TARGET_ARCH ${CMAKE_C_FLAGS} ${CMAKE_CXX_FLAGS})
    else()
        MESSAGE(FATAL "Processor Not found")
        set(TARGET_ARCH ${CMAKE_HOST_SYSTEM_PROCESSOR})
    endif()
    if(${TARGET_ARCH} STREQUAL "aarch64")
        set(TARGET_ARCH "larch64")
    endif()
endif()

MESSAGE(STATUS "TARGET_ARCH=${TARGET_ARCH}")
